author: Simon Huber
created: 20181125182242180
dependents: 
description: PrintRiver - print tiddlers
list: readme
modified: 20181125182242180
plugin-type: plugin
title: $:/plugins/BurningTreeC/PrintRiver
type: application/json
version: 0.1.0

{
    "tiddlers": {
        "$:/plugins/BurningTreeC/PrintRiver/Templates/new-window-river": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Templates/new-window-river",
            "text": "\\define containerClasses()\ntc-page-container tc-page-view-$(themeTitle)$ tc-language-$(languageTitle)$ $(templateClasses)$\n\\end\n\\define story-river-classes()\ntc-story-river $(storyClasses)$\n\\define get-classes(class)\n$(tv-config-toolbar-class)$ $class$\n\\end\n\n<div class=<<containerClasses>>>\n\n<$navigator story=<<storyList>> history=<<historyList>>>\n\n<$transclude tiddler=<<toolbar>> mode=\"block\"/>\n\n<div class=<<story-river-classes>>>\n\n<$list filter=\"[list<storyList>]\" template=<<tiddlerTemplate>> editTemplate=<<tiddlerEditTemplate>>/>\n\n</div>\n\n</$navigator>\n\n</div>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/PrintTemplate/Menu": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/PrintTemplate/Menu",
            "text": "\\define get-classes(class)\n$(tv-config-toolbar-class)$ $class$\n\\end\n\n<div class=\"tc-plugin-reload-warning tc-print-tiddler-window-overlay\">\n\n<$list filter=\"[all[tiddlers+shadows]tag[$:/tags/PrintToolbar]!has[draft.of]]\" variable=\"listItem\">\n<$transclude tiddler=<<listItem>>/>\n</$list>\n\n</div>\n"
        },
        "$:/language/Buttons/PrintRiver/Caption": {
            "title": "$:/language/Buttons/PrintRiver/Caption",
            "text": "print in new window"
        },
        "$:/language/Buttons/PrintRiver/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Hint",
            "text": "Print tiddler in new window"
        },
        "$:/language/Buttons/PrintRiver/PageBreak/Single/Hint": {
            "title": "$:/language/Buttons/PrintRiver/PageBreak/Single/Hint",
            "text": "insert a page-break before this tiddler"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint",
            "text": "print all tiddlers on a new page"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Print": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Print",
            "text": "print"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Sort": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Sort",
            "text": "sort"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Bodies/Center/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Bodies/Center/Hint",
            "text": "print tiddler content centered"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Hide/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Hide/Hint",
            "text": "don't print subtitles"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Show/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Show/Hint",
            "text": "print all subtitles"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Center/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Center/Hint",
            "text": "print all subtitles centered"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Tags/Hide/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Tags/Hide/Hint",
            "text": "don't print tags"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Tags/Show/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Tags/Show/Hint",
            "text": "print all tags"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Tags/Center/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Tags/Center/Hint",
            "text": "print all tags centered"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Titles/Hide/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Titles/Hide/Hint",
            "text": "don't print titles"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Titles/Show/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Titles/Show/Hint",
            "text": "print all titles"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint",
            "text": "print captions instead of titles"
        },
        "$:/language/Buttons/PrintRiver/Toolbar/Titles/Center/Hint": {
            "title": "$:/language/Buttons/PrintRiver/Toolbar/Titles/Center/Hint",
            "text": "print titles centered"
        },
        "$:/plugins/BurningTreeC/PrintRiver/PrintTemplate": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/PrintTemplate",
            "text": "\\define lingo-base() $:/language/Buttons/PrintRiver/Toolbar/\n\\define print-states(field)\n$:/state/print-river!!$field$\n\\end\n\\define single-print-states(suffix)\n$:/state/print-river/single/$suffix$/\n\\end\n\n<$vars storyList=\"$:/PrintList\" historyList=\"$:/PrintHistory\" tiddlerTemplate=\"$:/core/ui/ViewTemplate\" tiddlerEditTemplate=\"$:/core/ui/EditTemplate\" toolbar=\"$:/plugins/BurningTreeC/PrintRiver/PrintTemplate/Menu\" templateClasses=\"tc-print-tiddler-list-view\" storyClasses=\"tc-print-story-river\" tv-config-toolbar-icons={{$:/config/Toolbar/Icons}} tv-config-toolbar-text={{$:/config/Toolbar/Text}} tv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}} themeTitle={{$:/view}} languageTitle={{$:/language!!name}}>\n\n{{$:/plugins/BurningTreeC/PrintRiver/Templates/new-window-river}}\n\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-bodies": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-bodies",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"center-bodies\">> tiddlerState=<<single-print-states \"center-body\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-body-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Bodies/Center/Hint}} aria-labeltooltip={{$:/language/Buttons/PrintRiver/Toolbar/Bodies/center/Hint}}><<lingo Bodies/Center/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-center-body-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Bodies/Center/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Bodies/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\">\n<<lingo Bodies/Center/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-subtitles": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-subtitles",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"center-subtitles\">> tiddlerState=<<single-print-states \"center-subtitle\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Center/Hint}} aria-labeltooltip={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/center/Hint}}><$action-setfield $tiddler=\"$:/state/print-river\" show-subtitles=\"yes\"/><<lingo Subtitles/Center/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-center-title-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Center/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\">\n<<lingo Subtitles/Center/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-tags": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-tags",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"center-tags\">> tiddlerState=<<single-print-states \"center-tags\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Center/Hint}} aria-labeltooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tags/center/Hint}}><$action-setfield $tiddler=\"$:/state/print-river\" show-tags=\"yes\"/><<lingo Tags/Center/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-center-title-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Center/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\">\n<<lingo Tags/Center/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-titles": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/center-titles",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"center-titles\">> tiddlerState=<<single-print-states \"center-title\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Center/Hint}} aria-labeltooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/center/Hint}}><$action-setfield $tiddler=\"$:/state/print-river\" show-titles=\"yes\"/><<lingo Titles/Center/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-center-title-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Center/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\">\n<<lingo Titles/Center/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-page-break": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-page-break",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "\\define lingo-base() $:/language/Buttons/PrintRiver/PageBreak/\n\\define get-classes(class) $(tv-config-toolbar-class)$ $class$\n\\define set-page-break()\n<$action-setfield $tiddler=\"\"\"$:/state/print-page-break/$(storyTiddler)$\"\"\" text=\"yes\"/>\n\\end\n\\define unset-page-break()\n<$action-deletetiddler $tiddler=\"\"\"$:/state/print-page-break/$(storyTiddler)$\"\"\"/>\n\\end\n\\define page-break-button()\n<$reveal state=\"\"\"$:/state/print-page-break/$(storyTiddler)$\"\"\" type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-page-break-button tc-chooser-item\">> tooltip={{$:/language/Buttons/PrintRiver/PageBreak/Yes/Hint}} aria-label={{$:/language/Buttons/PrintRiver/PageBreak/Yes/Hint}}>\n<<set-page-break>>\n<<lingo Single/Hint>>\n</$button>\n</$reveal>\n<$reveal state=\"\"\"$:/state/print-page-break/$(storyTiddler)$\"\"\" type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-page-break-button tc-chooser-item tc-chosen\">> tooltip={{$:/language/Buttons/PrintRiver/PageBreak/No/Hint}} aria-label={{$:/language/Buttons/PrintRiver/PageBreak/No/Hint}}>\n<<unset-page-break>>\n<<lingo Single/Hint>>\n</$button>\n</$reveal>\n\\end\n<$list filter=\"[<storyTiddler>!regexp[^$]]\">\n<<page-break-button>>\n</$list>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/page-break": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/page-break",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "\\define lingo-base() $:/language/Buttons/PrintRiver/Toolbar/PageBreaks/\n\\define set-printlist-break-page()\n<$action-setfield $tiddler=\"\"\"$:/state/print-page-break/$(currentTiddler)$\"\"\" text=\"yes\"/>\n\\end\n\\define unset-printlist-break-page()\n<$action-deletetiddler $tiddler=\"\"\"$:/state/print-page-break/$(currentTiddler)$\"\"\"/>\n\\end\n\\define page-break-toolbar-button()\n<$list filter=\"[[$(pageBreakCount)$]!regexp[^$(printCount)$$]]\">\n<$button class=<<get-classes \"tc-print-tiddler-break-page-all-button tc-chooser-item\">> tooltip={{$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint}}>\n<$list filter=\"[list[$(storyList)$]]\">\n<<set-printlist-break-page>>\n</$list>\n<<lingo \"All/Hint\">>\n</$button>\n</$list>\n<$list filter=\"[[$(pageBreakCount)$]regexp[^$(printCount)$$]]\">\n<$button class=<<get-classes \"tc-print-tiddler-break-page-all-button tc-chooser-item tc-chosen\">> tooltip={{$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/PageBreaks/All/Hint}}>\n<$list filter=\"[list[$(storyList)$]]\">\n<<unset-printlist-break-page>>\n</$list>\n<<lingo \"All/Hint\">>\n</$button>\n</$list>\n\\end\n\n<$list filter=\"[<storyTiddler>regexp[^$]]\">\n<$list filter=\"[list<storyList>count[]]\" variable=\"printCount\">\n<$list filter=\"[list<storyList>lookup[$:/state/print-page-break/]regexp[^yes$]count[]]\" variable=\"pageBreakCount\">\n<<page-break-toolbar-button>>\n</$list>\n</$list>\n</$list>\n\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/print": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/print",
            "tags": "$:/tags/PrintToolbar",
            "text": "<$button class=<<get-classes \"tc-print-tiddler-print-button\">> message=\"tm-print\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Print}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Print}}>{{$:/core/images/print-button}}</$button>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-captions": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-captions",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"print-captions\">> tiddlerState=<<single-print-states \"print-caption\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint}}><<lingo Titles/Captions/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Captions/Hint}} actions=\"\"\"<<deleteState>>\"\"\">\n<<lingo Titles/Captions/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-subtitles": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-subtitles",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"show-subtitles\">> tiddlerState=<<single-print-states \"show-subtitle\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-subtitle-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Show/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Show/Hint}}><<lingo Subtitles/Show/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-subtitle-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Hide/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Subtitles/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\"><<lingo Subtitles/Show/Hint>></$button>\n</$reveal>\n</$vars>\n</$vars>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-tags": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-tags",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"show-tags\">> tiddlerState=<<single-print-states \"show-tags\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-tags-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Show/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Show/Hint}}><<lingo Tags/Show/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-subtitle-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Hide/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Tags/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\"><<lingo Tags/Show/Hint>></$button>\n</$reveal>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-titles": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-titles",
            "tags": "$:/tags/PrintToolbar/Tools",
            "text": "<$vars toolbarState=<<print-states \"show-titles\">> tiddlerState=<<single-print-states \"show-title\">>>\n<$vars printState={{{ [<storyTiddler>regexp[^$]addprefix<toolbarState>] [<storyTiddler>!regexp[^$]addprefix<tiddlerState>] }}}>\n<$reveal state=<<printState>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item\">> set=<<printState>> setTo=\"yes\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Show/Hint}} aria-labeltooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Show/Hint}}><<lingo Titles/Show/Hint>></$button>\n</$reveal>\n<$reveal state=<<printState>> type=\"match\" text=\"yes\">\n<$button class=<<get-classes \"tc-print-tiddler-title-button tc-chooser-item tc-chosen\">> set=<<printState>> setTo=\"no\" tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Hide/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Titles/Hide/Hint}} actions=\"\"\"<<deleteState>>\"\"\"><<lingo Titles/Show/Hint>></$button>\n</$reveal>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/sort-dropdown": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/sort-dropdown",
            "tags": "$:/tags/PrintToolbar",
            "text": "\\define lingo-base() $:/language/CloseAll/\n\\define drop-actions()\n<$action-listops $tiddler=\"\"\"$(storyList)$\"\"\" $subfilter=\"+[insertbefore:currentTiddler<actionTiddler>]\"/>\n\\end\n<$list filter=\"[list<storyList>count[]!regexp[^0$]!regexp[^1$]]\">\n<$button popup=\"$:/state/popup/print-tiddler/sort-river\" class=<<get-classes \"tc-print-tiddler-sort-button\">> tooltip={{$:/language/Buttons/PrintWindow/Toolbar/Sort}} aria-label={{$:/language/Buttons/PrintWindow/Toolbar/Sort}}>{{$:/core/images/sort-button}}</$button>\n<$reveal state=\"$:/state/popup/print-tiddler/sort-river\" type=\"popup\" position=\"below\" class=\"tc-print-sort-drop-down tc-popup-handle tc-popup-keep\">\n<$list filter=\"[list<storyList>]\" history=<<historyList>> storyview=\"pop\">\n<div style=\"position: relative;\">\n<$droppable actions=<<drop-actions>>>\n<div class=\"tc-droppable-placeholder\">\n&nbsp;\n</div>\n<div>\n<$button message=\"tm-close-tiddler\" tooltip={{$:/language/Buttons/Close/Hint}} aria-label={{$:/language/Buttons/Close/Caption}} class=\"tc-btn-invisible tc-btn-mini\">&times;</$button> <$link to={{!!title}}><$view field=\"title\"/></$link>\n</div>\n</$droppable>\n</div>\n</$list>\n<$tiddler tiddler=\"\">\n<$droppable actions=<<drop-actions>>>\n<div class=\"tc-droppable-placeholder\">\n&nbsp;\n</div>\n<$button message=\"tm-close-all-tiddlers\" class=\"tc-btn-invisible tc-btn-mini\"><<lingo Button>></$button>\n</$droppable>\n</$tiddler>\n</$reveal>\n</$list>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/print-tools": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/PrintToolbar/Buttons/print-tools",
            "tags": "$:/tags/PrintToolbar $:/tags/ViewToolbar",
            "list-before": "$:/core/ui/PrintToolbar/Buttons/print",
            "text": "\\define get-classes(class)\n$(tv-config-toolbar-class)$ $class$\n\\end\n\\define deleteState()\n<$list filter=\"[[$(storyTiddler)$]!regexp[^$]]\">\n<$action-deletetiddler $tiddler=\"\"\"$(printState)$\"\"\"/>\n</$list>\n\\end\n\n<$vars popupTiddler={{{ [<storyTiddler>regexp[^$]addprefix[$:/state/popup/print-tiddler-toolbar/tools]] [<storyTiddler>!regexp[^$]addprefix[$:/state/popup/tiddler-print/]] }}}>\n<$button class=<<get-classes \"tc-print-tiddler-tools-button\">> popup=<<popupTiddler>> tooltip={{$:/language/Buttons/PrintRiver/Toolbar/Tools/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Toolbar/Tools/Hint}}>{{$:/core/images/theme-button}}</$button>\n<$reveal state=<<popupTiddler>> type=\"popup\" position={{{ [<storyTiddler>regexp[^$]addprefix[below]] [<storyTiddler>!regexp[^$]addprefix[belowleft]removesuffix<storyTiddler>] }}} class=\"tc-popup-keep tc-drop-down tc-print-tiddler-tools-dropdown\" animate=\"yes\">\n<div class=\"tc-chooser\">\n<$list filter=\"[all[tiddlers+shadows]tag[$:/tags/PrintToolbar/Tools]!has[draft.of]]\" variable=\"listItem\">\n<$transclude tiddler=<<listItem>>/>\n</$list>\n</div>\n</$reveal>\n</$vars>\n"
        },
        "$:/core/modules/startup/windows.js": {
            "text": "/*\\\ntitle: $:/core/modules/startup/windows.js\ntype: application/javascript\nmodule-type: startup\n\nSetup root widget handlers for the messages concerned with opening external browser windows\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\n// Export name and synchronous status\nexports.name = \"windows\";\nexports.platforms = [\"browser\"];\nexports.after = [\"startup\"];\nexports.synchronous = true;\n\n// Global to keep track of open windows (hashmap by title)\nvar windows = {};\n\nexports.startup = function() {\n\t// Handle open window message\n\t$tw.rootWidget.addEventListener(\"tm-open-window\",function(event) {\n\t\t// Get the parameters\n\t\tvar refreshHandler,\n\t\t\ttitle = event.param || event.tiddlerTitle,\n\t\t\tparamObject = event.paramObject || {},\n\t\t\ttemplate = paramObject.template || \"$:/core/templates/single.tiddler.window\",\n\t\t\twidth = paramObject.width || \"700\",\n\t\t\theight = paramObject.height || \"600\",\n\t\t\tvariables = $tw.utils.extend({},paramObject,{currentTiddler: title});\n\t\t// Open the window\n\t\tvar srcWindow = window.open(\"\",\"external-\" + paramObject.windowTitle || title,\"scrollbars,width=\" + width + \",height=\" + height),\n\t\t\tsrcDocument = srcWindow.document;\n\t\twindows[title] = srcWindow;\n\t\t// Check for reopening the same window\n\t\tif(srcWindow.haveInitialisedWindow) {\n\t\t\treturn;\n\t\t}\n\t\t// Initialise the document\n\t\tsrcDocument.write(\"<html><head></head><body class='tc-body tc-single-tiddler-window'></body></html>\");\n\t\tsrcDocument.close();\n\t\tsrcDocument.title = paramObject.documentTitle || title;\n\t\tsrcWindow.addEventListener(\"beforeunload\",function(event) {\n\t\t\tdelete windows[title];\n\t\t\t$tw.wiki.removeEventListener(\"change\",refreshHandler);\n\t\t},false);\n\t\t// Set up the styles\n\t\tvar styleWidgetNode = $tw.wiki.makeTranscludeWidget(\"$:/core/ui/PageStylesheet\",{\n\t\t\t\tdocument: $tw.fakeDocument,\n\t\t\t\tvariables: variables,\n\t\t\t\timportPageMacros: true}),\n\t\t\tstyleContainer = $tw.fakeDocument.createElement(\"style\");\n\t\tstyleWidgetNode.render(styleContainer,null);\n\t\tvar styleElement = srcDocument.createElement(\"style\");\n\t\tstyleElement.innerHTML = styleContainer.textContent;\n\t\tsrcDocument.head.insertBefore(styleElement,srcDocument.head.firstChild);\n\t\t// Add click listener to be able to cancel popups\n\t\tsrcDocument.addEventListener(\"click\", function(event) {\n\t\t\tvar numPopups = $tw.popup.popups.length;\n\t\t\tif(numPopups !== 0) {\n\t\t\t\tfor(var i=0; i < numPopups; i++) {\n\t\t\t\t\t$tw.popup.handleEvent(event);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// Render the text of the tiddler\n\t\tvar parser = $tw.wiki.parseTiddler(template),\n\t\t\twidgetNode = $tw.wiki.makeWidget(parser,{document: srcDocument, parentWidget: $tw.rootWidget, variables: variables});\n\t\twidgetNode.render(srcDocument.body,srcDocument.body.firstChild);\n\t\t// Function to handle refreshes\n\t\trefreshHandler = function(changes) {\n\t\t\tif(styleWidgetNode.refresh(changes,styleContainer,null)) {\n\t\t\t\tstyleElement.innerHTML = styleContainer.textContent;\n\t\t\t}\n\t\t\twidgetNode.refresh(changes);\n\t\t};\n\t\t$tw.wiki.addEventListener(\"change\",refreshHandler);\n\t\tsrcWindow.haveInitialisedWindow = true;\n\t});\n\t// Close open windows when unloading main window\n\t$tw.addUnloadTask(function() {\n\t\t$tw.utils.each(windows,function(win) {\n\t\t\twin.close();\n\t\t});\n\t});\n\n};\n\n})();\n",
            "type": "application/javascript",
            "title": "$:/core/modules/startup/windows.js",
            "module-type": "startup"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Stylesheet/print": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Stylesheet/print",
            "tags": "$:/tags/Stylesheet",
            "text": "\\define set-tiddler-controls-visibility()\n[data-tiddler-title=\"$(currentTiddler)$\"]:hover .tc-tiddler-title {\n\tdisplay: inline;\n}\n[data-tiddler-title=\"$(currentTiddler)$\"]:hover .tc-tiddler-controls {\n\tdisplay: inline;\n}\n\\end\n\\define set-captions-as-titles()\n@media print {\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-titlebar .tc-tiddler-title-icon::after {\ncontent: \"$(tiddlerCaption)$\";\n}\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-titlebar .tc-title {\ndisplay: none;\n}\n}\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-titlebar .tc-tiddler-title-icon::after {\ncontent: \"$(tiddlerCaption)$\";\n}\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-titlebar .tc-title {\ndisplay: none;\n}\n\\end\n\\define set-titles-centered()\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-titlebar {\nwidth: 100%;\ntext-align: center;\n}\n@media print {\n[data-tiddler-title=\"$(currentTiddler)$\"] .tc-tiddler-title .tc-tiddler-controls {\ndisplay: none;\n}\n}\n\\end\n\\define set-subtitles-centered()\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-subtitle {\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 100%;\n\ttext-align: center;\n}\n\\end\n\\define set-tags-centered()\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 100%;\n\ttext-align: center;\n}\n\\end\n\\define set-bodies-centered()\n.tc-print-tiddler-list-view [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-tiddler-body {\n\ttext-align: center;\n}\n\\end\n\\define set-page-break-tiddlers()\n@media print {\n\t[data-tiddler-title='$(currentTiddler)$'].tc-tiddler-frame {\n\t\tpage-break-before: always;\n\t}\n}\n\\end\n\\define show-title()\n.tc-single-tiddler-window [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-tiddler-title-icon, .tc-single-tiddler-window .tc-tiddler-frame .tc-title {\n\tdisplay: inline;\n}\n@media print {\n.tc-single-tiddler-window .tc-tiddler-frame .tc-tiddler-title {\n\tdisplay: inline;\n}\n}\n\\end\n\\define show-subtitle()\n.tc-single-tiddler-window [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-subtitle {\n\tdisplay: inline-block;\n}\n@media print {\n.tc-single-tiddler-window .tc-tiddler-frame .tc-subtitle {\n\tdisplay: inline-block;\n}\n}\n\\end\n\\define show-tags()\n.tc-single-tiddler-window [data-tiddler-title=\"$(currentTiddler)$\"].tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: inline-block;\n}\n@media print {\n.tc-single-tiddler-window .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: inline-block;\n}\n}\n\\end\n\\define reveal-print-states()\n<$reveal state=\"$:/state/print-river!!center-titles\" type=\"match\" text=\"yes\">\n<$list filter=\"[list[$:/PrintList]]\">\n<<set-titles-centered>>\n</$list>\n</$reveal>\n<$reveal state=\"$:/state/print-river!!center-subtitles\" type=\"match\" text=\"yes\">\n<$list filter=\"[list[$:/PrintList]]\">\n<<set-subtitles-centered>>\n</$list>\n</$reveal>\n<$reveal state=\"$:/state/print-river!!center-tags\" type=\"match\" text=\"yes\">\n<$list filter=\"[list[$:/PrintList]]\">\n<<set-tags-centered>>\n</$list>\n</$reveal>\n<$reveal state=\"$:/state/print-river!!center-bodies\" type=\"match\" text=\"yes\">\n<$list filter=\"[list[$:/PrintList]]\">\n<<set-bodies-centered>>\n</$list>\n</$reveal>\n<$reveal state=\"$:/state/print-river!!print-captions\" type=\"match\" text=\"yes\">\n<$list filter=\"[list[$:/PrintList]]\">\n<$list filter=\"[<currentTiddler>get[caption]]\" variable=\"tiddlerCaption\">\n<<set-captions-as-titles>>\n</$list>\n</$list>\n</$reveal>\n<$reveal state=\"$(printState)$!!show-titles\" type=\"nomatch\" text=\"yes\">\n.tc-single-tiddler-window .tc-tiddler-frame .tc-tiddler-title-icon, .tc-single-tiddler-window .tc-tiddler-frame .tc-title {\n\tdisplay: none;\n}\n@media print {\n\n.tc-single-tiddler-window .tc-tiddler-frame .tc-tiddler-title {\n\tdisplay: none;\n}\n}\n</$reveal>\n<$reveal state=\"$(printState)$!!show-subtitles\" type=\"nomatch\" text=\"yes\">\n.tc-single-tiddler-window .tc-tiddler-frame .tc-subtitle {\n\tdisplay: none;\n}\n@media print {\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-subtitle {\n\tdisplay: none;\n}\n}\n</$reveal>\n<$reveal state=\"$(printState)$!!show-tags\" type=\"nomatch\" text=\"yes\">\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: none;\n}\n@media print {\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: none;\n}\n}\n</$reveal>\n<$reveal state=\"$(printState)$!!show-titles\" type=\"match\" text=\"yes\">\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tiddler-title-icon, .tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-title {\n\tdisplay: inline;\n}\n@media print {\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tiddler-title-icon, .tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-title {\n\tdisplay: inline;\n}\n}\n</$reveal>\n<$reveal state=\"$(printState)$!!show-subtitles\" type=\"match\" text=\"yes\">\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-subtitle {\n\tdisplay: inline-block;\n}\n@media print {\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-subtitle {\n\tdisplay: inline-block;\n}\n}\n</$reveal>\n<$reveal state=\"$(printState)$!!show-tags\" type=\"match\" text=\"yes\">\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: inline-block;\n}\n@media print {\n.tc-single-tiddler-window .tc-print-tiddler-list-view .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: inline-block;\n}\n}\n</$reveal>\n\\end\n\n.tc-print-tiddler-window-overlay p {\n\tdisplay: inline-block;\n\tmargin: 0;\n\t-webkit-margin-before: 0em;\n\t-webkit-margin-after: 0em;\n}\n.tc-print-tiddler-window-overlay button {\n\tpadding: .2em .5em 0em .5em;\n\tfont-size: 1.2em;\n\toutline: none;\n}\n.tc-print-tiddler-window-overlay button.tc-print-tiddler-print-button {\n\tpadding-bottom: 0.1em;\n}\n.tc-print-tiddler-list-view .tc-story-river {\n\tpadding: 0;\n\twidth: calc(100vw - 2.05em);\n}\n.tc-print-tiddler-list-view .tc-tiddler-frame {\n\tbox-shadow: none;\n\tborder: none;\n\twidth: calc(100vw - 2.05em);\n\tmargin-bottom: 0;\n}\n.tc-print-tiddler-list-view .tc-tiddler-frame:first-child {\n\tmargin-top: 1.5em;\n}\n.tc-print-tiddler-list-view .tc-tiddler-controls .tc-print-tiddler-button {\n\tdisplay: none;\n}\n.tc-print-sort-drop-down {\n\ttext-align: left;\n\tbox-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);\n\tpadding: 1em 2em 1em 1em;\n\tborder-radius: 4px;\n\tbackground-color: white;\n}\n.tc-page-container:not(.tc-print-tiddler-list-view) .tc-page-break-button, .tc-page-container:not(.tc-print-tiddler-list-view) .tc-print-tiddler-tools-button, .tc-page-container:not(.tc-print-tiddler-list-view) .tc-print-tiddler-tools-dropdown {\n\tdisplay: none;\n}\n.tc-print-tiddler-list-view .tc-tiddler-title .tc-tiddler-controls {\n\tdisplay: none;\n}\n.tc-print-tiddler-list-view .tc-tiddler-frame .tc-tiddler-body table {\n\tfont-size: {{$:/themes/tiddlywiki/vanilla/metrics/bodyfontsize}};\n\tline-height: {{$:/themes/tiddlywiki/vanilla/metrics/bodylineheight}};\n}\n\n<$vars printState=\"$:/state/print-river\">\n<<reveal-print-states>>\n</$vars>\n\n@media print {\n.tc-print-tiddler-window-overlay, .tc-print-sort-drop-down {\n\tdisplay: none;\n}\n}\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-page-break/]]\">\n<<set-page-break-tiddlers>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/show-title/]]\">\n<<show-title>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/show-subtitle/]]\">\n<<show-subtitle>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/show-tags/]]\">\n<<show-tags>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/center-title/]]\">\n<<set-titles-centered>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/center-subtitle/]]\">\n<<set-subtitles-centered>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/center-tags/]]\">\n<<set-tags-centered>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/center-body/]]\">\n<<set-bodies-centered>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/page-break/]]\">\n<<set-page-break-tiddlers>>\n</$list>\n\n<$list filter=\"[all[tiddlers]removeprefix[$:/state/print-river/single/print-caption/]]\">\n<$list filter=\"[<currentTiddler>get[caption]]\" variable=\"tiddlerCaption\">\n<<set-captions-as-titles>>\n</$list>\n</$list>\n\n<$list filter=\"[list[$:/PrintList]]\">\n<<set-tiddler-controls-visibility>>\n</$list>\n\n.tc-print-tiddler-list-view .tc-tiddler-frame {\n\tcursor: initial;\n}\n\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-window": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/Buttons/print-window",
            "tags": "$:/tags/ViewToolbar",
            "caption": "{{$:/core/images/print-button}} {{$:/language/Buttons/PrintRiver/Caption}}",
            "description": "{{$:/language/Buttons/PrintRiver/Hint}}",
            "text": "\\define print-tiddler-button-classes()\n$(tv-config-toolbar-class)$ tc-print-tiddler-button\n\\end\n\\define print-listops-actions()\n<$action-listops $tiddler=\"$:/PrintList\" $subfilter=\"\"\"[[$(storyTiddler)$]]\"\"\"/>\n\\end\n\\define get-document-title() $(siteTitle)$_$(timeStamp)$\n\\define open-window-actions()\n<$vars timeStamp=<<now \"\"\"$(timeStampFormat)$\"\"\">>>\n<$vars documentTitle=<<get-document-title>>>\n<$action-sendmessage $message=\"tm-open-window\" $param=\"$:/plugins/BurningTreeC/PrintRiver/PrintTemplate\" documentTitle=<<documentTitle>> windowTitle=\"TiddlyWiki5 - PrintRiver\"/>\n</$vars>\n</$vars>\n\\end\n\\whitespace trim\n<$button tooltip={{$:/language/Buttons/PrintRiver/Hint}} aria-label={{$:/language/Buttons/PrintRiver/Caption}} class=<<print-tiddler-button-classes>>>\n<$vars siteTitle={{$:/SiteTitle}} timeStampFormat={{$:/config/NewJournal/Title}}>\n<<print-listops-actions>>\n<<open-window-actions>>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/core/images/print-button}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\">\n<$text text=\" \"/>\n<$text text={{$:/language/Buttons/PrintRiver/Caption}}/>\n</span>\n</$list>\n</$vars>\n</$button>\n"
        },
        "$:/plugins/BurningTreeC/PrintRiver/readme": {
            "title": "$:/plugins/BurningTreeC/PrintRiver/readme",
            "text": "This plugin adds a Print-River to ~TiddlyWiki5\n\nTiddlers can be sent to it by clicking the {{$:/core/ui/Buttons/print-tiddler}} Button\n\n"
        }
    }
}